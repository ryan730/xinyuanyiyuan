import{d as k,q as i,A as B,r,J as L,c as _,K as R,m as u,h as t,w as g,U as f,R as D,o as h,n as J,l as n,S as s}from"./index-79f9e569.js";const P={class:"user-page w-full flex h-full"},V={class:"user-table w-[calc(100%-15rem)] ml-5"},O={class:"p-2 bg-white"},$={class:"table-header flex"},q=u("div",{class:"table-header-title w-40 text-left"},"用户列表",-1),A={name:"systemUser"},G=k({...A,setup(E){i();const v=i(),d=i([]),c=(e,o)=>e[o.property]==1?"已完成":"未完成",w=(e,o)=>e[o.property]==1?"男":"女",y=(e,o)=>e[o.property].replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"),l=B({name:"",account:"",deptId:1,pageNum:1,pageSize:20,total:0,loading:!0});i([]);const m=i([]),b=async()=>{l.loading=!0;const e=await f.getList({page:l.pageNum});console.log("UserService-----",l.pageNum,e);const{users:o,count:p,cur_page:a}=e.data;m.value=o,l.total=p,l.pageNum=Number(a),l.pageSize=l.pageSize||20,l.loading=!1},S=async()=>{const e=D(d.value).map(o=>o.uid);console.log("multipleSelection======",JSON.stringify(e)),await f.downLoad({uids:JSON.stringify(e)})},N=e=>{d.value=e},x=e=>(e==null?void 0:e.t1)==1&&(e==null?void 0:e.t2)==1&&(e==null?void 0:e.t3)==1,C=e=>{l.pageNum=e.page,b()};return b(),(e,o)=>{const p=r("el-button"),a=r("el-table-column"),z=r("el-table"),T=r("pagination"),U=L("loading");return h(),_("div",P,[R((h(),_("div",V,[u("div",O,[u("div",$,[q,t(p,{type:"primary",loading:!1,onClick:S},{default:g(()=>[J("下载")]),_:1})]),t(z,{data:m.value,ref_key:"multipleTableRef",ref:v,border:"",onSelectionChange:N},{default:g(()=>[t(a,{type:"selection",width:"55",selectable:x}),t(a,{width:"60","show-overflow-tooltip":"",label:n(s)("table.uid"),prop:"uid"},null,8,["label"]),t(a,{width:"60","show-overflow-tooltip":"",label:n(s)("table.status"),prop:"status"},null,8,["label"]),t(a,{"show-overflow-tooltip":"",label:n(s)("table.name"),prop:"name"},null,8,["label"]),t(a,{"class-name":"colum-elm","show-overflow-tooltip":"",label:n(s)("table.mobile"),prop:"mobile",formatter:y},null,8,["label"]),t(a,{"show-overflow-tooltip":"",label:n(s)("table.gender"),formatter:w,prop:"gender",width:"55"},null,8,["label"]),t(a,{"show-overflow-tooltip":"",label:n(s)("table.position"),prop:"position"},null,8,["label"]),t(a,{"class-name":"colum-elm","show-overflow-tooltip":"",label:n(s)("table.created_at"),prop:"created_at"},null,8,["label"]),t(a,{width:"80","show-overflow-tooltip":"",label:n(s)("table.t1"),prop:"t1",formatter:c},null,8,["label"]),t(a,{width:"80","show-overflow-tooltip":"",label:n(s)("table.t2"),prop:"t2",formatter:c},null,8,["label"]),t(a,{width:"80","show-overflow-tooltip":"",label:n(s)("table.t3"),prop:"t3",formatter:c},null,8,["label"])]),_:1},8,["data"]),t(T,{total:l.total,page:l.pageNum,size:l.pageSize,onPagination:C},null,8,["total","page","size"])])])),[[U,l.loading]])])}}});export{G as default};
