import{d as M,q as i,A as P,r as p,J as V,c as w,K as E,m as d,t as R,l as b,h as l,b as U,w as y,P as F,D as q,E as A,o as g,z as J,n as K,a as j}from"./index-79f9e569.js";import{L as S}from"./index-d71be140.js";const G=_=>(q("data-v-66301c77"),_=_(),A(),_),O={class:"user-page w-full flex h-full"},Q={class:"user-table w-[calc(100%-15rem)] ml-5"},W={class:"p-2 bg-white"},X={class:"table-header flex"},Z={class:"table-header-title w-40 text-left"},$={class:"but-right"},ee={class:"but-right-date"},te=G(()=>d("span",{class:"demonstration"},"选择开始和结束时间",-1)),oe={name:"systemUser"},ae=M({...oe,setup(_){i();const D=i(),x=i([]),s=i(void 0),N=new Date(2e3,1,1,12,0,0),h=i(!1),C={1:"未⽀付",2:"待⽀付",3:"已⽀付"},u=i(!1),L=async()=>{var o,a;let e={},n=(o=s==null?void 0:s.value)==null?void 0:o[0],c=(a=s==null?void 0:s.value)==null?void 0:a[1];n&&c&&(e={time_start:n,time_end:c}),u.value=!0;const r=await S.downLoad({type:"orderlist",...e});u.value=!1,alert(r?"下载成功!":"下载失败!")},k=(e,n)=>C[e==null?void 0:e.pay_status],t=P({name:"",account:"",deptId:1,pageNum:1,pageSize:20,total:0,loading:!0});i([]);const f=i([]),m=async(e={})=>{t.loading=!0;let n={},{time_start:c,time_end:r}=e;c&&r&&(n={time_start:c,time_end:r});const o=await S.orderList({page:t.pageNum,...n});console.log("ListService-----",t.pageNum,o);const{data:a,cur_page:v}=o;f.value=a==null?void 0:a.list,t.total=a==null?void 0:a.total,t.pageNum=Number(t.pageNum),t.pageSize=t.pageSize||20,t.loading=!1},Y=e=>{x.value=e},z=e=>!0,B=e=>{h.value||(t.pageNum=e.page,m())},I=e=>{console.log("handlerDateChange======",e,s),h.value=!0,t.pageNum=1,m({time_start:e==null?void 0:e[0],time_end:e==null?void 0:e[1]})};return m(),(e,n)=>{const c=p("el-date-picker"),r=p("el-button"),o=p("el-table-column"),a=p("el-table"),v=p("pagination"),T=V("loading");return g(),w("div",O,[E((g(),w("div",Q,[d("div",W,[d("div",X,[d("div",Z,R(b(J)("orderList")),1),d("div",$,[d("div",ee,[te,l(c,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=H=>s.value=H),type:"datetimerange",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",onChange:I,"start-placeholder":"Start Date","end-placeholder":"End Date","default-time":b(N)},null,8,["modelValue","default-time"])]),s.value?(g(),U(r,{key:0,type:"primary",loading:u.value,onClick:L},{default:y(()=>[K("下载")]),_:1},8,["loading"])):F("",!0)])]),l(a,{data:f.value,ref_key:"multipleTableRef",ref:D,border:"",onSelectionChange:Y},{default:y(()=>[l(o,{type:"selection",width:"55",selectable:z}),l(o,{width:"100","show-overflow-tooltip":"",label:"订单号",prop:"id"}),l(o,{width:"100","show-overflow-tooltip":"",label:"商品id",prop:"product_id"}),l(o,{"show-overflow-tooltip":"",label:"⽤⼾openid",prop:"openid"}),l(o,{"show-overflow-tooltip":"",label:"订单⾦额",prop:"amount"}),l(o,{"show-overflow-tooltip":"",label:"订单状态",prop:"pay_status",formatter:k}),l(o,{"class-name":"colum-elm","show-overflow-tooltip":"",label:"下单时间",prop:"created_at"})]),_:1},8,["data"]),l(v,{total:t.total,page:t.pageNum,size:t.pageSize,onPagination:B},null,8,["total","page","size"])])])),[[T,t.loading]])])}}});const ne=j(ae,[["__scopeId","data-v-66301c77"]]);export{ne as default};
